generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model history {
  score       Int?
  answered_at DateTime? @db.Timestamp(6)
  created_at  DateTime? @db.Timestamp(6)
  answer      String?
  feedback    String?
  history_id  String    @id @db.VarChar(255)
  question    String
  question_id String    @db.VarChar(255)
  status      String    @db.VarChar(255)
  user_id     String    @db.VarChar(255)
  user        user      @relation(fields: [user_id], references: [user_id], onDelete: NoAction, onUpdate: NoAction, map: "fkpy3lfhg8fo09iuxmixhr0kdbt")
}

model user {
  points            Int
  email             String        @unique @db.VarChar(255)
  job               String        @db.VarChar(255)
  name              String        @db.VarChar(255)
  notification_type String        @db.VarChar(255)
  password          String        @db.VarChar(255)
  schedule          String        @db.VarChar(255)
  user_id           String        @id @db.VarChar(255)
  history           history[]
  oauth_token       oauth_token[]
}

model sensor {
  sensor_id    Int           @id @default(autoincrement())
  sensor_name  String        @db.VarChar(100)
  location     String?
  installed_at DateTime?     @default(now()) @db.Timestamptz(6)
  sensor_data  sensor_data[]
}

model sensor_data {
  data_id     Int      @id @default(autoincrement())
  sensor_id   Int
  recorded_at DateTime @default(now()) @db.Timestamptz(6)
  temperature Float?
  humidity    Float?
  light       Float?
  co2         Float?
  sensor      sensor   @relation(fields: [sensor_id], references: [sensor_id], onDelete: Cascade, onUpdate: NoAction)
}

model interview_questions {
  id           BigInt  @id @default(autoincrement())
  category     String? @db.VarChar(255)
  difficulty   String? @db.VarChar(255)
  experience   String? @db.VarChar(255)
  ideal_answer String?
  keywords     String?
  question     String
  role         String? @db.VarChar(255)
  source_type  String? @db.VarChar(255)

  @@index([category], map: "idx_category")
  @@index([difficulty], map: "idx_difficulty")
  @@index([role], map: "idx_role")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model oauth_token {
  id                       BigInt    @id @default(autoincrement())
  access_token             String    @db.VarChar(500)
  created_at               DateTime  @db.Timestamp(6)
  provider                 String    @db.VarChar(20)
  refresh_token            String?   @db.VarChar(500)
  refresh_token_expires_at DateTime? @db.Timestamp(6)
  token_expires_at         DateTime  @db.Timestamp(6)
  updated_at               DateTime? @db.Timestamp(6)
  user_id                  String    @db.VarChar(255)
  user                     user      @relation(fields: [user_id], references: [user_id], onDelete: NoAction, onUpdate: NoAction, map: "fk9bq3t9xrvellgudfdm1xrore7")
}

enum notification_type {
  EMAIL
  KAKAO
}

enum question_status {
  ANSWERED
  UNANSWERED
}

enum schedule_type {
  DAILY
  WEEKLY
}

enum notificationtype {
  BOTH
  EMAIL
  KAKAO
}

enum questionstatus {
  ANSWERED
  UNANSWERED
}

enum scheduletype {
  DAILY
  WEEKLY
}
