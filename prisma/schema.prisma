generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model history {
  history_id  String         @id @db.VarChar(200)
  question_id String         @db.VarChar(200)
  user_id     String         @db.VarChar(200)
  answer      String?
  question    String
  feedback    String?
  score       Int?
  status      questionstatus
  answered_at DateTime?      @db.Timestamp(6)
  created_at  DateTime?      @db.Timestamp(6)
  user        user           @relation(fields: [user_id], references: [user_id], onDelete: NoAction, onUpdate: NoAction, map: "fkpy3lfhg8fo09iuxmixhr0kdbt")
}

model user {
  user_id           String           @id @db.VarChar(200)
  email             String           @unique(map: "ukhl4ga9r00rh51mdaf20hmnslt") @db.VarChar(255)
  job               String           @db.VarChar(100)
  name              String           @db.VarChar(100)
  password          String           @db.VarChar(255)
  notification_type notificationtype
  points            Int
  schedule          scheduletype
  history           history[]
}

model sensor {
  sensor_id    Int           @id @default(autoincrement())
  sensor_name  String        @db.VarChar(100)
  location     String?
  installed_at DateTime?     @default(now()) @db.Timestamptz(6)
  sensor_data  sensor_data[]
}

model sensor_data {
  data_id     Int      @id @default(autoincrement())
  sensor_id   Int
  recorded_at DateTime @default(now()) @db.Timestamptz(6)
  temperature Float?
  humidity    Float?
  light       Float?
  co2         Float?
  sensor      sensor   @relation(fields: [sensor_id], references: [sensor_id], onDelete: Cascade, onUpdate: NoAction)
}

enum notification_type {
  EMAIL
  KAKAO
}

enum question_status {
  ANSWERED
  UNANSWERED
}

enum schedule_type {
  DAILY
  WEEKLY
}

enum notificationtype {
  BOTH
  EMAIL
  KAKAO
}

enum questionstatus {
  ANSWERED
  UNANSWERED
}

enum scheduletype {
  DAILY
  WEEKLY
}
